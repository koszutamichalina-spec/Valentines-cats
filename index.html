<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Walentykowe Kotki ğŸ’—</title>

<style>
body{
  margin:0;
  font-family:system-ui;
  background:black;
  color:pink;
  display:flex;
  justify-content:center;
}

#wrap{max-width:900px;padding:20px;text-align:center;}

canvas{
  background:#050505;
  border:3px solid hotpink;
  border-radius:14px;
  width:100%;
}

button,input{
  padding:12px 16px;
  border-radius:999px;
  border:2px solid hotpink;
  background:black;
  color:pink;
  font-weight:700;
}

#winScreen{
  position:fixed;
  inset:0;
  background:black;
  display:none;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  gap:16px;
  z-index:10;
}

#reward img{max-width:280px;border-radius:16px;}
</style>
</head>

<body>
<div id="wrap">
<h2>Walentykowe Kotki ğŸ’•</h2>
<p>â¬…ï¸â¡ï¸â¬†ï¸â¬‡ï¸ = kot 1 | WASD = kot 2</p>

<canvas id="game" width="800" height="500"></canvas>
</div>

<!-- WIN -->
<div id="winScreen">
  <h2>RozwiÄ…Å¼ zagadkÄ™ ğŸ’Œ</h2>
  <p>(hasÅ‚o z kartki)</p>

  <input id="quizInput" placeholder="Wpisz hasÅ‚o...">
  <button id="quizBtn">Odbierz nagrodÄ™ ğŸ’–</button>

  <p id="quizMsg"></p>

  <div id="reward" style="display:none">
    <img src="IMG_2704.jpeg">
    <p>KOCHAM CIÄ˜ NAJMNIEJ ğŸ¥¹ğŸ’—</p>
  </div>

  <audio id="winMusic" src="win.mp3"></audio>
</div>

<script>
const c = game.getContext("2d");

let level=0;

const cats=[
 {x:80,y:400,color:"pink",keys:{l:37,r:39,u:38,d:40}},
 {x:160,y:400,color:"white",keys:{l:65,r:68,u:87,d:83}}
];

const door={x:700,y:380,w:60,h:80};

const keys={};
onkeydown=e=>keys[e.keyCode]=1;
onkeyup=e=>keys[e.keyCode]=0;

function bg(){
  const p=Math.min(level*40,150);
  return `rgb(${p},0,${p})`;
}

function drawCat(ca){
 c.fillStyle=ca.color;
 c.beginPath();
 c.arc(ca.x,ca.y,14,0,Math.PI*2);
 c.fill();
}

function updateCat(ca){
 if(keys[ca.keys.l]) ca.x-=3;
 if(keys[ca.keys.r]) ca.x+=3;
 if(keys[ca.keys.u]) ca.y-=3;
 if(keys[ca.keys.d]) ca.y+=3;
 ca.x=Math.max(10,Math.min(790,ca.x));
 ca.y=Math.max(10,Math.min(490,ca.y));
}

function near(a,b){
 return Math.hypot(a.x-b.x,a.y-b.y)<40;
}

const winScreen=document.getElementById("winScreen");
const quizBtn=document.getElementById("quizBtn");
const quizInput=document.getElementById("quizInput");
const quizMsg=document.getElementById("quizMsg");
const reward=document.getElementById("reward");
const music=document.getElementById("winMusic");

const ANSWER="KOTEK";

quizBtn.onclick=async()=>{
 if(quizInput.value.toUpperCase()==ANSWER){
   quizMsg.textContent="DOBRZE ğŸ˜­ğŸ’—";
   reward.style.display="block";
   try{await music.play()}catch{}
 }else quizMsg.textContent="SprÃ³buj jeszcze ğŸ¥º";
};

function loop(){
 c.fillStyle=bg();
 c.fillRect(0,0,800,500);

 cats.forEach(updateCat);
 cats.forEach(drawCat);

 // drzwi
 c.strokeStyle="hotpink";
 c.strokeRect(door.x,door.y,door.w,door.h);
 c.fillText("ğŸ’—",door.x+18,door.y+50);

 // serduszko gdy blisko
 if(near(cats[0],cats[1])){
   c.font="20px serif";
   c.fillText("ğŸ’—",(cats[0].x+cats[1].x)/2,(cats[0].y+cats[1].y)/2-20);
 }

 // win
 const inDoor=ca=>ca.x>door.x && ca.x<door.x+door.w && ca.y>door.y;

 if(inDoor(cats[0]) && inDoor(cats[1])){
   winScreen.style.display="flex";
 }

 requestAnimationFrame(loop);
}

loop();
</script>
</body>
</html>
