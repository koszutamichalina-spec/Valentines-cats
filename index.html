<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Walentynkowe Kotki üíï</title>

<style>
body{
  margin:0;
  background:linear-gradient(#050505,#150018);
  color:#ffd6f0;
  font-family:system-ui;
  display:flex;
  justify-content:center;
}

#wrapper{
  max-width:900px;
  padding:20px;
  text-align:center;
}

h1{font-size:34px}

canvas{
  background:#080008;
  border:3px solid hotpink;
  border-radius:18px;
  box-shadow:0 0 30px #ff4fcf;
}

#ui{
  margin-top:10px;
}

button{
  background:#ff6ad5;
  border:none;
  padding:10px 18px;
  border-radius:12px;
  font-weight:700;
}

.hidden{display:none}

#overlay{pointer-events: auto;
cursor: pointer;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.95);
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  color:pink;
  z-index:99;
}
#overlay img{
  max-width:80%;
  border-radius:20px;
  box-shadow:0 0 40px hotpink;
}
</style>
</head>

<body>

<div id="wrapper">
<h1>Walentynkowe Kotki üíï</h1>
<p>‚¨ÖÔ∏è‚û°Ô∏è = kot 1 | WASD = kot 2</p>

<canvas id="game" width="820" height="460"></canvas>

<div id="ui">
<button onclick="restart()">Restart</button>
</div>
</div>

<div id="overlay" class="hidden">
<h2 id="overlayText"></h2>
<img id="finalPhoto"/>
<audio id="music" src="win.mp3"></audio>
<button onclick="closeOverlay()">OK üíñ</button>
</div>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");

let keys={};

document.addEventListener("keydown",e=>keys[e.key]=true);
document.addEventListener("keyup",e=>keys[e.key]=false);

const cat1={x:100,y:200,c:"#ffb3d9"};
const cat2={x:160,y:200,c:"#9ae7ff"};

let level=0;

const levels=[
 {door:{x:700,y:170}},
 {door:{x:50,y:50}},
 {door:{x:700,y:300}}
];

function drawCat(c){
 ctx.beginPath();
 ctx.arc(c.x,c.y,12,0,Math.PI*2);
 ctx.fillStyle=c.c;
 ctx.fill();
}

function controls(){
 if(keys.ArrowLeft)cat1.x-=3;
 if(keys.ArrowRight)cat1.x+=3;
 if(keys.ArrowUp)cat1.y-=3;
 if(keys.ArrowDown)cat1.y+=3;

 if(keys.a)cat2.x-=3;
 if(keys.d)cat2.x+=3;
 if(keys.w)cat2.y-=3;
 if(keys.s)cat2.y+=3;
}

function drawDoor(){
 let d=levels[level].door;
 ctx.strokeStyle="hotpink";
 ctx.lineWidth=3;
 ctx.strokeRect(d.x,d.y,40,60);
 ctx.fillText("üíó",d.x+8,d.y+38);
}

function checkTogether(){
 const dx=cat1.x-cat2.x;
 const dy=cat1.y-cat2.y;
 return Math.hypot(dx,dy)<28;
}

function drawHeart(){
 ctx.fillText("üíó",(cat1.x+cat2.x)/2-5,(cat1.y+cat2.y)/2-15);
}

function nextLevel(){
 level++;
 if(level>=levels.length){
   showFinal();
 }
}

function showFinal(){
 document.getElementById("overlay").classList.remove("hidden");
 document.getElementById("overlayText").innerText="Wygra≈Ça≈õ üíñ Teraz nagroda‚Ä¶";
 document.getElementById("finalPhoto").src="IMG_2704.jpeg";
 document.getElementById("music").play();
}

function restart(){
 cat1.x=100;
 cat2.x=160;
 level=0;
}

function update(){
 ctx.clearRect(0,0,canvas.width,canvas.height);
 ctx.font="20px Arial";

 controls();
 drawCat(cat1);
 drawCat(cat2);
 drawDoor();

 if(checkTogether())drawHeart();

 const d=levels[level].door;
 if(cat1.x>d.x && cat1.x<d.x+40 &&
    cat2.x>d.x && cat2.x<d.x+40 &&
    cat1.y>d.y && cat1.y<d.y+60 &&
    cat2.y>d.y && cat2.y<d.y+60){
     nextLevel();
 }

 requestAnimationFrame(update);
}

update();
  document.getElementById("overlay").addEventListener("click", closeOverlay);
document.getElementById("overlay").addEventListener("touchstart", closeOverlay);
function closeOverlay(){
  document.getElementById("music").pause();
  document.getElementById("music").currentTime = 0;
  document.getElementById("overlay").classList.add("hidden");
  restart(); // wraca do lvl 1
}

</script>

</body>
</html>
