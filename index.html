<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Walentynkowe Kotki üíò</title>
  <style>
    body { font-family: system-ui, Arial; margin: 0; background:#fff; }
    .wrap { max-width: 900px; margin: 0 auto; padding: 24px; text-align:center; }
    h1 { margin: 8px 0 4px; }
    p { margin: 0 0 16px; opacity: .8; }
    canvas { border: 3px solid #111; border-radius: 14px; background: #f8f8f8; max-width: 100%; height: auto; }
    .bar { display:flex; gap:12px; justify-content:center; align-items:center; flex-wrap:wrap; margin: 14px 0; }
    button { padding: 10px 14px; border-radius: 999px; border:2px solid #111; background:#fff; cursor:pointer; font-weight:600; }
    .pill { padding: 8px 12px; border-radius: 999px; border:2px solid #111; background:#fff; font-weight:600; }
    .hint { font-size: 13px; opacity:.7; margin-top:10px; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Walentynkowe Kotki üíò</h1>
    <p>Steruj kotkami, zbieraj serduszka. (WASD + strza≈Çki)</p>

    <div class="bar">
      <div class="pill">Punkty: <span id="score">0</span></div>
      <button id="restart">Restart</button>
    </div>

    <canvas id="game" width="800" height="500"></canvas>
    <div class="hint">Tip: Jak chcesz, p√≥≈∫niej dodamy ‚ÄûwygranƒÖ wiadomo≈õƒá‚Äù dla ch≈Çopaka üíå</div>
  </div>

  <script>
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d");
    const scoreEl = document.getElementById("score");
    const restartBtn = document.getElementById("restart");

    const keys = {};
    window.addEventListener("keydown", e => keys[e.key.toLowerCase()] = true);
    window.addEventListener("keyup", e => keys[e.key.toLowerCase()] = false);

    function rand(min,max){ return Math.random()*(max-min)+min; }

    let score, heart, cat1, cat2, msgTimer;

    function reset(){
      score = 0; msgTimer = 0;
      cat1 = { x: 220, y: 260, r: 18, speed: 3.2, color: "#111", name:"Kotek 1" };
      cat2 = { x: 580, y: 260, r: 18, speed: 3.2, color: "#111", name:"Kotek 2" };
      heart = { x: rand(80,720), y: rand(80,420), r: 14 };
      scoreEl.textContent = score;
    }

    function clamp(v,min,max){ return Math.max(min, Math.min(max, v)); }

    function drawCat(c){
      // kotek: g≈Çowa + uszy + oczka
      ctx.lineWidth = 3;
      ctx.strokeStyle = c.color;
      ctx.fillStyle = "transparent";

      // g≈Çowa
      ctx.beginPath(); ctx.arc(c.x, c.y, c.r, 0, Math.PI*2); ctx.stroke();

      // uszy
      ctx.beginPath();
      ctx.moveTo(c.x - c.r*0.6, c.y - c.r*0.8);
      ctx.lineTo(c.x - c.r*0.2, c.y - c.r*1.35);
      ctx.lineTo(c.x, c.y - c.r*0.75);
      ctx.stroke();

      ctx.beginPath();
      ctx.moveTo(c.x + c.r*0.6, c.y - c.r*0.8);
      ctx.lineTo(c.x + c.r*0.2, c.y - c.r*1.35);
      ctx.lineTo(c.x, c.y - c.r*0.75);
      ctx.stroke();

      // oczy
      ctx.beginPath(); ctx.arc(c.x - c.r*0.25, c.y - c.r*0.1, 2.5, 0, Math.PI*2); ctx.stroke();
      ctx.beginPath(); ctx.arc(c.x + c.r*0.25, c.y - c.r*0.1, 2.5, 0, Math.PI*2); ctx.stroke();

      // pyszczek
      ctx.beginPath();
      ctx.moveTo(c.x, c.y + 2);
      ctx.lineTo(c.x, c.y + 8);
      ctx.moveTo(c.x, c.y + 8);
      ctx.lineTo(c.x - 8, c.y + 14);
      ctx.moveTo(c.x, c.y + 8);
      ctx.lineTo(c.x + 8, c.y + 14);
      ctx.stroke();
    }

    function drawHeart(h){
      ctx.lineWidth = 3;
      ctx.strokeStyle = "#111";
      const x = h.x, y = h.y, s = h.r;
      ctx.beginPath();
      ctx.moveTo(x, y + s*0.6);
      ctx.bezierCurveTo(x - s*1.2, y - s*0.2, x - s*0.6, y - s*1.2, x, y - s*0.6);
      ctx.bezierCurveTo(x + s*0.6, y - s*1.2, x + s*1.2, y - s*0.2, x, y + s*0.6);
      ctx.closePath();
      ctx.stroke();
    }

    function dist(a,b){ return Math.hypot(a.x-b.x, a.y-b.y); }

    function update(){
      // sterowanie: kotek1 WASD, kotek2 strza≈Çki
      if(keys["w"]) cat1.y -= cat1.speed;
      if(keys["s"]) cat1.y += cat1.speed;
      if(keys["a"]) cat1.x -= cat1.speed;
      if(keys["d"]) cat1.x += cat1.speed;

      if(keys["arrowup"]) cat2.y -= cat2.speed;
      if(keys["arrowdown"]) cat2.y += cat2.speed;
      if(keys["arrowleft"]) cat2.x -= cat2.speed;
      if(keys["arrowright"]) cat2.x += cat2.speed;

      cat1.x = clamp(cat1.x, 30, canvas.width-30);
      cat1.y = clamp(cat1.y, 40, canvas.height-30);
      cat2.x = clamp(cat2.x, 30, canvas.width-30);
      cat2.y = clamp(cat2.y, 40, canvas.height-30);

      // zbieranie serduszka: wystarczy ≈ºe kt√≥rykolwiek dotknie
      const hit = (Math.hypot(cat1.x-heart.x, cat1.y-heart.y) < (cat1.r+heart.r)) ||
                  (Math.hypot(cat2.x-heart.x, cat2.y-heart.y) < (cat2.r+heart.r));
      if(hit){
        score += 1;
        scoreEl.textContent = score;
        heart.x = rand(60, canvas.width-60);
        heart.y = rand(80, canvas.height-60);
        if(score % 10 === 0) msgTimer = 120; // poka≈º komunikat na chwilƒô
      }
    }

    function draw(){
      ctx.clearRect(0,0,canvas.width,canvas.height);

      // ramka i malutkie serduszka t≈Ça
      ctx.lineWidth = 3;
      ctx.strokeStyle = "#111";
      ctx.strokeRect(12,12,canvas.width-24,canvas.height-24);

      for(let i=0;i<18;i++){
        const hx = (i*43 + 37) % canvas.width;
        const hy = (i*71 + 60) % canvas.height;
        ctx.save(); ctx.globalAlpha = 0.25;
        drawHeart({x:hx, y:hy, r:8});
        ctx.restore();
      }

      drawHeart(heart);
      drawCat(cat1);
      drawCat(cat2);

      // mini ‚Äûwalentynkowo≈õƒá‚Äù: jak kotki siƒô dotknƒÖ, pojawia siƒô serduszko
      if(dist(cat1,cat2) < cat1.r + cat2.r + 6){
        drawHeart({x:(cat1.x+cat2.x)/2, y:(cat1.y+cat2.y)/2 - 28, r:10});
      }

      if(msgTimer > 0){
        msgTimer--;
        ctx.font = "700 26px system-ui";
        ctx.fillStyle = "#111";
        ctx.fillText("üíå Bonus: 10 serduszek! Kocham Ciƒô!", 170, 50);
      }
    }

    function loop(){
      update();
      draw();
      requestAnimationFrame(loop);
    }

    restartBtn.addEventListener("click", reset);

    reset();
    loop();
  </script> <!-- WIN SCREEN -->
<div id="winScreen" style="
display:none;
position:fixed;
inset:0;
background:black;
color:pink;
z-index:9999;
flex-direction:column;
justify-content:center;
align-items:center;
text-align:center;
font-family:system-ui;
">

<h1>üíó Wygra≈Çe≈õ üíó</h1>

<img src="IMG_2704.jpeg" style="
max-width:80%;
border-radius:20px;
border:4px solid pink;
box-shadow:0 0 30px hotpink;
margin:20px;
">

<p style="font-size:20px">
Nagroda dla Ciebie üòò  
RozwiƒÖ≈º zagadkƒô, kt√≥rƒÖ dosta≈Çe≈õ na kartce...
</p>                <div style="margin-top:14px; display:flex; gap:10px; justify-content:center; flex-wrap:wrap;">
  <input id="quizInput" placeholder="Wpisz has≈Ço z kartki..."
    style="padding:12px 14px; border-radius:999px; border:2px solid hotpink; outline:none; font-size:16px;">
  <button id="quizBtn"
    style="padding:12px 16px; border-radius:999px; border:2px solid hotpink; background:black; color:pink; font-weight:700;">
    Odbierz nagrodƒô üíñ
  </button>
</div>

<p id="quizMsg" style="margin-top:12px; opacity:.9;"></p>

<audio id="winMusic" src="win.mp3"></audio>

</div>
</body>
</html>
